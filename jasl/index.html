<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JASL: JASL (Just Another String Library)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">JASL
   &#160;<span id="projectnumber">[1.1.0-beta]-2018-09-10</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">JASL (Just Another String Library) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://travis-ci.org/matepek/jasl"></a> <a href="https://ci.appveyor.com/project/matepek/jasl/branch/master"></a> <a href="https://coveralls.io/github/matepek/jasl"></a></p>
<p>This repository contains <b>C++** string classes with **static character array/C-string</b> support.</p>
<h1>Motivation</h1>
<p>Sometimes we would like to use hardwired text resources. For example throwing an exception where the message is user specified. Just like in case of <a href="http://en.cppreference.com/w/cpp/error/runtime_error">std::runtime_error</a> the message (<em>const char*</em> parameter named <em>what_arg</em>) is "typically stored internally", which means the parameter will be copied. But usually users use it like <code>std::runtime_error("Coyote catched the Roadrunner!")</code> or <code>std::runtime_error(__FILE__)</code> where the <em>what_arg</em> is actually a a hardwired text. In this cases the copying seems unnecessary.</p>
<p>Creating your own exception and using this library's <a href="include/jasl/static_string.hpp">jasl::static_string</a> class will eliminate the unnecessary copy in a type-safe way. For example the compiler will generate an error in case of the following situation: </p><div class="fragment"><div class="line">{c++}</div><div class="line">jasl::static_string s(&quot;Bear trap was activated!&quot;); // ok</div><div class="line">s = &quot;Bear trap was activated!&quot;; // ok</div><div class="line"></div><div class="line">// this is ok too, becasue []</div><div class="line">const char exception_message[] = &quot;Bear trap was activated!&quot;;</div><div class="line">jasl::static_string s(exception_message); // ok</div><div class="line">s = exception_message; // ok</div><div class="line"></div><div class="line">const char* exception_message_ptr = &quot;Bear trap was activated!&quot;;</div><div class="line">jasl::static_string s(exception_message_ptr); // compilation error!!</div><div class="line">s = exception_message_ptr;  // compilation error!!</div></div><!-- fragment --><p>Continuing the previous example: What if we occasionally want to use the dynamic string, but in the majority of the cases we would like to use static string. The <a href="include/jasl/string.hpp">jasl::string</a> class supposed to give a solution for this situation. Check the example: </p><div class="fragment"><div class="line">{c++}</div><div class="line">const char exception_message[] = &quot;Bear trap was activated!&quot;;</div><div class="line">jasl::string s(exception_message); // ok: A pointer to the original charater array is copied.</div><div class="line">s = exception_message; // ok: A pointer to the original charater array is copied.</div><div class="line">s.assign(exception_message); // ok: A pointer to the original charater array is copied.</div><div class="line"></div><div class="line">const char* exception_message_ptr = exception_message;</div><div class="line">jasl::string s(exception_message_ptr); // ok: Memory is allocated and the message is copied.</div><div class="line">s = exception_message_ptr; // compilation error: can&#39;t do this, use assign instead!</div><div class="line">s.assign(exception_message_ptr); // ok: Memory is allocated and the message is copied.</div></div><!-- fragment --><h1>Requirements</h1>
<ul>
<li><a href="http://en.cppreference.com/w/cpp/header">C++ standard library</a></li>
<li>clang, gcc or msvc</li>
<li>Minimum C++11:<ul>
<li><em>constexpr</em> specifier</li>
<li><em>noexcept</em> specifier.</li>
<li><a href="http://en.cppreference.com/w/cpp/utility/hash">std::hash</a></li>
<li>static_assert</li>
</ul>
</li>
</ul>
<h1>Installation</h1>
<p>This is a header-only library. Add the <code>include</code> directory to your include directories.</p>
<p>Note: For building and running tests see <a href="#tests-test-coverage-and-performance-tests">Tests, Test Coverage and Performance Tests</a></p>
<h1><a href="https://matepek.github.io/jasl/index.html">Documentation</a></h1>
<p>This is a header-only library containing</p><ul>
<li><a href="include/jasl/string_view.hpp">jasl::string_view</a>,</li>
<li><a href="include/jasl/static_string.hpp">jasl::static_string</a>,</li>
<li><a href="include/jasl/string.hpp">jasl::string</a></li>
</ul>
<p>classes.</p>
<p>Location: <code>include</code> directory.</p>
<h2>For documentation go <a href="https://matepek.github.io/jasl/index.html">HERE</a></h2>
<h3>Pros and Cons comparing to <a href="http://en.cppreference.com/w/cpp/string/basic_string">std::string</a></h3>
<p>Pros:</p><ul>
<li>It can hold static string using less resources or it can hold a dynamically allocated string.</li>
<li>In case of static string:<ul>
<li>No memory allocation -&gt; no exception.</li>
<li>No memory copy.</li>
</ul>
</li>
</ul>
<p>Cons:</p><ul>
<li>Only the underlying (string view) type's functionality can be used.</li>
</ul>
<h1>Configuration</h1>
<p><a href="https://matepek.github.io/jasl">See documentation here!</a></p>
<p><a href="https://matepek.github.io/jasl/globals.html">And here!</a></p>
<h1>Changelog</h1>
<p><a class="el" href="md__c_h_a_n_g_e_l_o_g.html">Here: CHANGELOG.md</a></p>
<h1>Correctness</h1>
<p>&gt;Evaluating a string-literal results in a string literal object with static storage duration, initialized from the given characters as specified above. <a href="https://stackoverflow.com/questions/32872465/const-char-value-lifetime">Source</a></p>
<p>Note: <a href="http://en.cppreference.com/w/cpp/concept/LiteralType">cppreference - literal types</a></p>
<h1>Tests, Test Coverage and Performance Tests</h1>
<h2>Requirements</h2>
<ul>
<li>[gn]: This tool is developed by the chromium project. <a href="https://refi64.com/gn-builds/">Download it!</a> or build yourself.</li>
<li>[ninja]: A pretty fast build tool. <a href="https://github.com/ninja-build/ninja/wiki/Pre-built-Ninja-packages">Install it</a> or <a href="https://github.com/ninja-build/ninja/releases">download</a></li>
<li><a href="https://www.python.org/downloads/">python</a>: It is required by https://chromium.googlesource.com/chromium/src/+/master/tools/gn/README.md "gn". Note: Make sure your python directory is contained by the <code>PATH</code> environment variable.</li>
</ul>
<p>There is a <code>build/build_helper.py</code> script. If it is called with <code>--install</code> parameter, it will download the gn and ninja.</p>
<p><b>Once again</b>: One doesn't have to deal with this. It is only for those who would like to see the test results themselves. (I've chosen https://chromium.googlesource.com/chromium/src/+/master/tools/gn/README.md "gn" because I wanted to understand and learn the technology a bit.)</p>
<h2>Building, testing and generating coverage report</h2>
<p>After https://chromium.googlesource.com/chromium/src/+/master/tools/gn/README.md "gn" and <a href="https://github.com/ninja-build/ninja">ninja</a> is installed it is easy (hopefully). Typically the output directory is inside the <code>out</code> directory (which is part of the repo, but empty now). From command line from the project's root directory:</p>
<div class="fragment"><div class="line">gn gen out/default</div></div><!-- fragment --><p>This will create a directory inside <code>out</code> and generate the <a href="https://github.com/ninja-build/ninja">ninja</a> files. It's time to build:</p>
<div class="fragment"><div class="line">ninja -C out/default</div></div><!-- fragment --><p>And we are done. This built and run the tests too.</p>
<p>There is a more build options for example:</p><ul>
<li>std_version</li>
<li>is_asan</li>
<li>is_generate_test_coverage</li>
<li>compiler_type</li>
</ul>
<p>These can be set by calling </p><div class="fragment"><div class="line">gn args out/default</div></div><!-- fragment --><p> and then editing the file which was opened.</p>
<p>For detailed options: </p><div class="fragment"><div class="line">gn args out/default --list</div></div><!-- fragment --><h3>Tests</h3>
<p><a href="https://travis-ci.org/matepek/jasl"></a> <a href="https://ci.appveyor.com/project/matepek/jasl/branch/master"></a></p>
<p>Following the previous steps will also run the tests. The test binaries are in the out directory (example: out/default) if someone would like to rerun them.</p>
<p>Source location: <code>test/*.test.cpp</code></p>
<h4>Semantic Error Tests</h4>
<p>The project contains semantic error tests too. (For examples see section <a href="#motivation">Motivation</a>) These tests are also run by the building process.</p>
<p>Source location: <code>test/*.test_build_err.cpp.c</code>.</p>
<p><b>Note</b>: This files have a _.c_ extension. This is how gn can differentiate between the building commands. It is necessary because we expect a building error in case of these files.</p>
<h3>Coverage</h3>
<p><a href="https://coveralls.io/github/matepek/jasl"></a></p>
<p>In case of <code>is_generate_test_coverage=true</code> gn argument the building will generate html code coverage reports. Works with clang.</p>
<p>Location of the test coverage results: <code>out/&lt;outdir&gt;/*.coverage</code> directories.</p>
<p><b>Note</b>: The coverage report is not perfect.</p>
<p>For example in case of the <a href="include/jasl/static_string.hpp">jasl::static_string</a>'s coverage report the <a href="include/jasl/string_view.hpp">jasl::string_view</a> file's coverage is irrelevant. Also because of some function is <code>constexpr</code> the compiler does its work and executes the code at compile time. In this case the method may seems uncovered. Another problem with the coverage is that the library's classes contain templates and the the C++ compilers only instantiate those which are used, the unused ones are not instatiated so those won't be seen in the report as an uncovered code.</p>
<p><b>Note</b>: Generating coverage report with gcc is also works, but it only generates raw data.</p>
<h3>Performance Tests</h3>
<p>Performance tests are compiled by the building process, but it won't run them.</p>
<p>After building, the performance binaries are in the out directory and they are ready to be run.</p>
<p>Source location: <code>test/*.performance.cpp</code></p>
<h4>(Generated) Performance Test Results</h4>
<h5>./comparison_with_std_string.performance</h5>
<p>JASL version: 1.0.0-beta (2018-07-19)</p>
<p>This performance test compares construction and destruction of the jasl::static_string and the <a href="include/jasl/string.hpp">jasl::string</a> to <a href="http://en.cppreference.com/w/cpp/string/basic_string">std::string</a>.</p>
<p>Parameters:</p><ul>
<li>( ItemCount, IterCount ) := ( 100000, 5 )</li>
<li><p class="startli">( sizeof(short_string_array), sizeof(long_string_array) ) := ( 6, 150 )</p>
<p class="startli"><b>Remarks</b>: The results depend on the size of the character array given to the std::string's constructor.</p>
</li>
</ul>
<p>Hardware:</p><ul>
<li>Processor (type, frequency): 2,6 GHz Intel Core i5</li>
<li>Memory: 8 GB 1600 MHz DDR3</li>
<li>Operating System: macOS 10.13.4</li>
</ul>
<p><b>NOTE</b>: Base type of the <a href="include/jasl/static_string.hpp">jasl::static_string</a> and <a href="include/jasl/string.hpp">jasl::string</a> is <a href="include/jasl/string_view.hpp">jasl::string_view</a>.</p>
<ul>
<li>short <a href="http://en.cppreference.com/w/cpp/string/basic_string">std::string</a> / short <a href="include/jasl/static_string.hpp">jasl::static_string</a> = <b>208 %</b><ul>
<li>short [jasl::static_string]: 1.54476e-08 sec / unit</li>
<li>short [std::string]: 3.22507e-08 sec / unit</li>
</ul>
</li>
<li>short <a href="http://en.cppreference.com/w/cpp/string/basic_string">std::string</a> / short static <a href="include/jasl/string.hpp">jasl::string</a> = <b>186 %</b><ul>
<li>short static [jasl::string]: 1.7339e-08 sec / unit</li>
<li>short [std::string]: 3.22507e-08 sec / unit</li>
</ul>
</li>
<li>long <a href="http://en.cppreference.com/w/cpp/string/basic_string">std::string</a> / long <a href="include/jasl/static_string.hpp">jasl::static_string</a> = <b>4083 %</b><ul>
<li>long [jasl::static_string]: 1.29123e-08 sec / unit</li>
<li>long [std::string]: 5.27216e-07 sec / unit</li>
</ul>
</li>
<li>long <a href="http://en.cppreference.com/w/cpp/string/basic_string">std::string</a> / long static <a href="include/jasl/string.hpp">jasl::string</a> = <b>3480 %</b><ul>
<li>long static [jasl::string]: 1.5146e-08 sec / unit</li>
<li>long [std::string]: 5.27216e-07 sec / unit</li>
</ul>
</li>
<li>long <a href="http://en.cppreference.com/w/cpp/string/basic_string">std::string</a> / long dynamic <a href="include/jasl/string.hpp">jasl::string</a> = <b>199 %</b><ul>
<li>long dynamic [jasl::string]: 2.63628e-07 sec / unit</li>
<li>long [std::string]: 5.27216e-07 sec / unit</li>
</ul>
</li>
</ul>
<h3>Tested on</h3>
<p><a href="https://travis-ci.org/matepek/jasl">Travis</a> and <a href="https://ci.appveyor.com/api/projects/status/jmfo82d6oumjpjxf/branch/master?svg=true">Appveyor</a> build and run the tests with more compiler than the following list.</p>
<ul>
<li>OSX 10.13.4 - Apple LLVM version 9.1.0 (clang-902.0.39.1)</li>
<li>Ubuntu 16.04 - g++ (Ubuntu 4.8.5-4ubuntu2) 4.8.5</li>
<li>Ubuntu 16.04 - g++ (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609</li>
<li>Ubuntu 16.04 - clang version 6.0.1-svn329487-1~exp1~20180408093033.68 (branches/release_60)</li>
<li>MS Windows 10 - Microsoft (R) C/C++ Optimizing Compiler Version 19.13.26132 for x64</li>
<li>MS Windows 10 - clang version 6.0.1 &amp; Microsoft (R) C/C++ Optimizing Compiler Version 19.13.26132 for x64</li>
</ul>
<h1>Licence and third-parties</h1>
<p>JASL library uses the [MIT](LICENSE) license.</p>
<h1>Thanks and Stuffs I used</h1>
<ul>
<li><a href="https://github.com/Microsoft/vswhere">https://github.com/Microsoft/vswhere</a></li>
</ul>
<h1>TODOs</h1>
<ul>
<li>jasl::string_view could have more methods like <a href="http://en.cppreference.com/w/cpp/header/string_view">find_first, etc..</a></li>
<li>support for <a href="http://en.cppreference.com/w/cpp/language/user_literal">literals</a></li>
<li>std_string support (to_std_string, jasl string view compare operator std, ?)</li>
<li>constexpr hash </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Sep 10 2018 18:53:33 for JASL by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
